<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<title>í”„ë­í¬ IRL ì˜¤ë²„ë ˆì´ ì™„ì„±ë³¸</title>

<script src="https://cdn.jsdelivr.net/npm/@rtirl/api"></script>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<style>

html, body{
margin:0;
padding:0;
background:transparent;
overflow:hidden;
font-family:Pretendard, sans-serif;
color:#fff;
}

/* í•˜ë‹¨ë°” */
#overlay{

position:fixed;
bottom:0;
left:0;
right:0;

height:36px;

background:rgba(0,0,0,0.7);

backdrop-filter:blur(6px);

display:flex;

justify-content:space-between;

align-items:center;

padding:0 10px;

font-size:13px;

}


/* ì¢Œì¸¡ */

.left{

display:flex;
gap:10px;
align-items:center;

}


/* ìš°ì¸¡ */

.right{

display:flex;
gap:10px;
align-items:center;

}


/* ê³µí†µ */

.item{

display:flex;
gap:3px;
align-items:center;

font-size:13px;

font-weight:400;

color:#fff;

}


/* ê±°ë¦¬ */

#distance{

color:#7df9ff;

}


/* ìˆ˜ìµ */

.revenue{

display:flex;
gap:6px;

}

.revenue span{

font-size:13px;
font-weight:400;
color:#fff;

}


/* ë¡œê³  */

.icon{

height:18px;

}

</style>

</head>


<body>


<div id="overlay">


<div class="left">

<div class="item">

<span>ğŸ“</span>

<span id="distance">

0.00 km

</span>

</div>



<div class="revenue">

<span>

ì¼

<span id="daily">

0ì›

</span>

</span>



<span>

ì›”

<span id="monthly">

0ì›

</span>

</span>



<span>

ë…„

<span id="yearly">

0ì›

</span>

</span>


</div>


</div>



<div class="right">


<div class="item" id="weather">

ğŸŒ¡ï¸ --

</div>


<div class="item" id="time">

ğŸ• --

</div>


<div class="item" id="battery">

ğŸ”‹ --

</div>


<img class="icon" src="https://raw.githubusercontent.com/ljw2455qq/obs-overlay/main/%EC%9C%A0%ED%8A%9C%EB%B8%8C%EB%A1%9C%EA%B3%A0.png">


</div>


</div>



<script>


/* Firebase ì„¤ì • */

const firebaseConfig={

apiKey:"ì—¬ê¸°ì— ìƒˆ APIí‚¤",

authDomain:"í”„ë¡œì íŠ¸.firebaseapp.com",

databaseURL:"https://í”„ë¡œì íŠ¸-default-rtdb.firebaseio.com",

projectId:"í”„ë¡œì íŠ¸",

};


firebase.initializeApp(firebaseConfig);


const db=firebase.database();




/* ìˆ˜ìµ ë¡œë“œ */

db.ref("overlayData").on("value",snap=>{

const data=snap.val();

if(!data)return;


daily.innerText=format(data.daily);

monthly.innerText=format(data.monthly);

yearly.innerText=format(data.yearly);


});


function format(n){

return Number(n).toLocaleString()+"ì›";

}




/* GPS */

let total=0;

let prev=null;



RealtimeIRL.forPullKey("ì—¬ê¸° PullKey").addLocationListener(loc=>{


if(prev){

total+=dist(prev,loc);

}


prev=loc;


distance.innerText=(total/1000).toFixed(2)+" km";


});



function dist(a,b){

const R=6371e3;

const dLat=(b.latitude-a.latitude)*Math.PI/180;

const dLon=(b.longitude-a.longitude)*Math.PI/180;

const lat1=a.latitude*Math.PI/180;

const lat2=b.latitude*Math.PI/180;


const x=Math.sin(dLat/2)**2+

Math.cos(lat1)*Math.cos(lat2)*

Math.sin(dLon/2)**2;


return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));

}




/* ì‹œê°„ */

setInterval(()=>{


const now=new Date();


time.innerText=

"ğŸ• "+now.toLocaleTimeString("ko-KR");


},1000);





/* ë°°í„°ë¦¬ */


navigator.getBattery().then(b=>{


function update(){

battery.innerText=

(b.charging?"âš¡":"ğŸ”‹")+" "+Math.round(b.level*100)+"%";

}


update();


b.onlevelchange=update;

});





/* ë‚ ì”¨ */


async function weather(){


const res=await fetch(

"https://api.openweathermap.org/data/2.5/weather?q=Sejong&appid=ë‚ ì”¨API&units=metric&lang=kr"

);


const d=await res.json();


weather.innerText=

"ğŸŒ¡ï¸ "+Math.round(d.main.temp)+"Â°C";


}


weather();


setInterval(weather,600000);


</script>


</body>

</html>
